<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="684px" preserveAspectRatio="none" style="width:758px;height:684px;background:#FFFFFF;" version="1.1" viewBox="0 0 758 684" width="758px" zoomAndPan="magnify"><defs><filter height="300%" id="f10uwj8wwfkxje" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="177" x="284" y="16.708">Index (LSP refactor)</text><!--MD5=[88bd1797aa51b7eb596ab9c2cedac94c]
cluster edu.tec.ic6821.fulltextsearch--><polygon fill="#FFFFFF" filter="url(#f10uwj8wwfkxje)" points="16,26.9531,256,26.9531,263,49.25,741,49.25,741,677.9531,16,677.9531,16,26.9531" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="16" x2="263" y1="49.25" y2="49.25"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="234" x="20" y="41.9482">edu.tec.ic6821.fulltextsearch</text><!--MD5=[2265efe58f509802ec1fe9822d1e6e2b]
cluster index--><polygon fill="#FFFFFF" filter="url(#f10uwj8wwfkxje)" points="326,69.9531,376,69.9531,383,92.25,717,92.25,717,516.9531,326,516.9531,326,69.9531" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="326" x2="383" y1="92.25" y2="92.25"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="44" x="330" y="84.9482">index</text><!--MD5=[66f7a5b5f2619cad7aacc321aede603a]
cluster trie--><polygon fill="#FFFFFF" filter="url(#f10uwj8wwfkxje)" points="40,225.9531,75,225.9531,82,248.25,302,248.25,302,653.9531,40,653.9531,40,225.9531" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="40" x2="82" y1="248.25" y2="248.25"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="29" x="44" y="240.9482">trie</text><!--MD5=[15b9a87b033c6044cf0e9bbdacb18726]
class Index--><rect codeLine="8" fill="#FEFECE" filter="url(#f10uwj8wwfkxje)" height="73.6094" id="Index" style="stroke:#A80036;stroke-width:1.5;" width="195" x="422.5" y="104.9531"/><ellipse cx="498.75" cy="120.9531" fill="#B4A7E5" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M495.1719,116.7344 L495.1719,114.4531 L502.5625,114.4531 L502.5625,116.7344 L500.0938,116.7344 L500.0938,125.1875 L502.5625,125.1875 L502.5625,127.4531 L495.1719,127.4531 L495.1719,125.1875 L497.6406,125.1875 L497.6406,116.7344 L495.1719,116.7344 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="34" x="519.25" y="125.1074">Index</text><line style="stroke:#A80036;stroke-width:1.5;" x1="423.5" x2="616.5" y1="136.9531" y2="136.9531"/><line style="stroke:#A80036;stroke-width:1.5;" x1="423.5" x2="616.5" y1="144.9531" y2="144.9531"/><ellipse cx="433.5" cy="155.9531" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="158" x="442.5" y="159.1636">index(String term, File):void</text><ellipse cx="433.5" cy="168.7578" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="169" x="442.5" y="171.9683">search(String term):Set&lt;File&gt;</text><!--MD5=[896558809a65a66364a101265d6caaf4]
class PersistentIndex--><rect codeLine="13" fill="#FEFECE" filter="url(#f10uwj8wwfkxje)" height="73.6094" id="PersistentIndex" style="stroke:#A80036;stroke-width:1.5;" width="125" x="342.5" y="260.9531"/><ellipse cx="357.5" cy="276.9531" fill="#B4A7E5" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M353.9219,272.7344 L353.9219,270.4531 L361.3125,270.4531 L361.3125,272.7344 L358.8438,272.7344 L358.8438,281.1875 L361.3125,281.1875 L361.3125,283.4531 L353.9219,283.4531 L353.9219,281.1875 L356.3906,281.1875 L356.3906,272.7344 L353.9219,272.7344 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="93" x="371.5" y="281.1074">PersistentIndex</text><line style="stroke:#A80036;stroke-width:1.5;" x1="343.5" x2="466.5" y1="292.9531" y2="292.9531"/><line style="stroke:#A80036;stroke-width:1.5;" x1="343.5" x2="466.5" y1="300.9531" y2="300.9531"/><ellipse cx="353.5" cy="311.9531" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="74" x="362.5" y="315.1636">persist():void</text><ellipse cx="353.5" cy="324.7578" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="98" x="362.5" y="327.9683">restore():boolean</text><!--MD5=[587a74f44ccd1f6f7285247a7be3e6b9]
class InMemoryMapIndex--><rect codeLine="18" fill="#FEFECE" filter="url(#f10uwj8wwfkxje)" height="60.8047" id="InMemoryMapIndex" style="stroke:#A80036;stroke-width:1.5;" width="198" x="503" y="267.4531"/><ellipse cx="539.15" cy="283.4531" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M541.6188,289.3281 Q541.0406,289.6406 540.4,289.7969 Q539.7594,289.9531 539.0563,289.9531 Q536.5563,289.9531 535.2281,288.2813 Q533.9156,286.6094 533.9156,283.4531 Q533.9156,280.2969 535.2281,278.625 Q536.5563,276.9531 539.0563,276.9531 Q539.7594,276.9531 540.4,277.1094 Q541.0563,277.2656 541.6188,277.5781 L541.6188,280.375 Q540.9938,279.8125 540.4,279.5469 Q539.8063,279.2656 539.1813,279.2656 Q537.8375,279.2656 537.15,280.3281 Q536.4625,281.3906 536.4625,283.4531 Q536.4625,285.5313 537.15,286.5938 Q537.8375,287.6406 539.1813,287.6406 Q539.8063,287.6406 540.4,287.375 Q540.9938,287.1094 541.6188,286.5313 L541.6188,289.3281 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="119" x="557.85" y="287.6074">InMemoryMapIndex</text><line style="stroke:#A80036;stroke-width:1.5;" x1="504" x2="700" y1="299.4531" y2="299.4531"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="511" y="307.4531"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="172" x="523" y="313.6636">index:Map&lt;String, Set&lt;File&gt;&gt;</text><line style="stroke:#A80036;stroke-width:1.5;" x1="504" x2="700" y1="320.2578" y2="320.2578"/><!--MD5=[cb9bb2482726ddd12b50b902a735724a]
class MapIndex--><rect codeLine="22" fill="#FEFECE" filter="url(#f10uwj8wwfkxje)" height="73.6094" id="MapIndex" style="stroke:#A80036;stroke-width:1.5;" width="111" x="558.5" y="426.9531"/><ellipse cx="582.5" cy="442.9531" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M584.9688,448.8281 Q584.3906,449.1406 583.75,449.2969 Q583.1094,449.4531 582.4063,449.4531 Q579.9063,449.4531 578.5781,447.7813 Q577.2656,446.1094 577.2656,442.9531 Q577.2656,439.7969 578.5781,438.125 Q579.9063,436.4531 582.4063,436.4531 Q583.1094,436.4531 583.75,436.6094 Q584.4063,436.7656 584.9688,437.0781 L584.9688,439.875 Q584.3438,439.3125 583.75,439.0469 Q583.1563,438.7656 582.5313,438.7656 Q581.1875,438.7656 580.5,439.8281 Q579.8125,440.8906 579.8125,442.9531 Q579.8125,445.0313 580.5,446.0938 Q581.1875,447.1406 582.5313,447.1406 Q583.1563,447.1406 583.75,446.875 Q584.3438,446.6094 584.9688,446.0313 L584.9688,448.8281 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="59" x="598.5" y="447.1074">MapIndex</text><line style="stroke:#A80036;stroke-width:1.5;" x1="559.5" x2="668.5" y1="458.9531" y2="458.9531"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="566.5" y="466.9531"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="73" x="578.5" y="473.1636">indexFile:File</text><line style="stroke:#A80036;stroke-width:1.5;" x1="559.5" x2="668.5" y1="479.7578" y2="479.7578"/><ellipse cx="569.5" cy="490.7578" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="85" x="578.5" y="493.9683">MapIndex(:File)</text><!--MD5=[6d06c686e4bd32f57b9ced1fb1531613]
class TrieIndex--><rect codeLine="34" fill="#FEFECE" filter="url(#f10uwj8wwfkxje)" height="73.6094" id="TrieIndex" style="stroke:#A80036;stroke-width:1.5;" width="181" x="342.5" y="426.9531"/><ellipse cx="400.75" cy="442.9531" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M403.2188,448.8281 Q402.6406,449.1406 402,449.2969 Q401.3594,449.4531 400.6563,449.4531 Q398.1563,449.4531 396.8281,447.7813 Q395.5156,446.1094 395.5156,442.9531 Q395.5156,439.7969 396.8281,438.125 Q398.1563,436.4531 400.6563,436.4531 Q401.3594,436.4531 402,436.6094 Q402.6563,436.7656 403.2188,437.0781 L403.2188,439.875 Q402.5938,439.3125 402,439.0469 Q401.4063,438.7656 400.7813,438.7656 Q399.4375,438.7656 398.75,439.8281 Q398.0625,440.8906 398.0625,442.9531 Q398.0625,445.0313 398.75,446.0938 Q399.4375,447.1406 400.7813,447.1406 Q401.4063,447.1406 402,446.875 Q402.5938,446.6094 403.2188,446.0313 L403.2188,448.8281 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="56" x="421.25" y="447.1074">TrieIndex</text><line style="stroke:#A80036;stroke-width:1.5;" x1="343.5" x2="522.5" y1="458.9531" y2="458.9531"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="350.5" y="466.9531"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="73" x="362.5" y="473.1636">indexFile:File</text><line style="stroke:#A80036;stroke-width:1.5;" x1="343.5" x2="522.5" y1="479.7578" y2="479.7578"/><ellipse cx="353.5" cy="490.7578" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="155" x="362.5" y="493.9683">TrieIndex(:File, :Trie&lt;File&gt;)</text><!--MD5=[546fb56c0be9f87e8d73979cbab93d0a]
class Trie--><rect codeLine="43" fill="#FEFECE" filter="url(#f10uwj8wwfkxje)" height="73.6094" id="Trie" style="stroke:#A80036;stroke-width:1.5;" width="202" x="77" y="260.9531"/><ellipse cx="156.75" cy="276.9531" fill="#B4A7E5" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M153.1719,272.7344 L153.1719,270.4531 L160.5625,270.4531 L160.5625,272.7344 L158.0938,272.7344 L158.0938,281.1875 L160.5625,281.1875 L160.5625,283.4531 L153.1719,283.4531 L153.1719,281.1875 L155.6406,281.1875 L155.6406,272.7344 L153.1719,272.7344 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="22" x="177.25" y="281.1074">Trie</text><rect fill="#FFFFFF" height="15.9688" style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" width="10" x="272" y="257.9531"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="8" x="273" y="270.0918">V</text><line style="stroke:#A80036;stroke-width:1.5;" x1="78" x2="278" y1="292.9531" y2="292.9531"/><line style="stroke:#A80036;stroke-width:1.5;" x1="78" x2="278" y1="300.9531" y2="300.9531"/><ellipse cx="88" cy="311.9531" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="176" x="97" y="315.1636">insert(String key, V value):void</text><ellipse cx="88" cy="324.7578" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="134" x="97" y="327.9683">find(String key):Set&lt;V&gt;</text><!--MD5=[d7c06b572bb27012ae14bc6c79495aeb]
class HashTrie--><rect codeLine="48" fill="#FEFECE" filter="url(#f10uwj8wwfkxje)" height="60.8047" id="HashTrie" style="stroke:#A80036;stroke-width:1.5;" width="104" x="123" y="433.4531"/><ellipse cx="141.6" cy="449.4531" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M144.0688,455.3281 Q143.4906,455.6406 142.85,455.7969 Q142.2094,455.9531 141.5063,455.9531 Q139.0063,455.9531 137.6781,454.2813 Q136.3656,452.6094 136.3656,449.4531 Q136.3656,446.2969 137.6781,444.625 Q139.0063,442.9531 141.5063,442.9531 Q142.2094,442.9531 142.85,443.1094 Q143.5063,443.2656 144.0688,443.5781 L144.0688,446.375 Q143.4438,445.8125 142.85,445.5469 Q142.2563,445.2656 141.6313,445.2656 Q140.2875,445.2656 139.6,446.3281 Q138.9125,447.3906 138.9125,449.4531 Q138.9125,451.5313 139.6,452.5938 Q140.2875,453.6406 141.6313,453.6406 Q142.2563,453.6406 142.85,453.375 Q143.4438,453.1094 144.0688,452.5313 L144.0688,455.3281 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="52" x="156.4" y="453.6074">HashTrie</text><rect fill="#FFFFFF" height="15.9688" style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" width="10" x="220" y="430.4531"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="8" x="221" y="442.5918">V</text><line style="stroke:#A80036;stroke-width:1.5;" x1="124" x2="226" y1="465.4531" y2="465.4531"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="131" y="473.4531"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="78" x="143" y="479.6636">root:TrieNode</text><line style="stroke:#A80036;stroke-width:1.5;" x1="124" x2="226" y1="486.2578" y2="486.2578"/><!--MD5=[6274e17003689406b79ae2074c020b0b]
class TrieNode--><rect codeLine="52" fill="#FEFECE" filter="url(#f10uwj8wwfkxje)" height="73.6094" id="TrieNode" style="stroke:#A80036;stroke-width:1.5;" width="231" x="55.5" y="563.9531"/><ellipse cx="140.25" cy="579.9531" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M142.7188,585.8281 Q142.1406,586.1406 141.5,586.2969 Q140.8594,586.4531 140.1563,586.4531 Q137.6563,586.4531 136.3281,584.7813 Q135.0156,583.1094 135.0156,579.9531 Q135.0156,576.7969 136.3281,575.125 Q137.6563,573.4531 140.1563,573.4531 Q140.8594,573.4531 141.5,573.6094 Q142.1563,573.7656 142.7188,574.0781 L142.7188,576.875 Q142.0938,576.3125 141.5,576.0469 Q140.9063,575.7656 140.2813,575.7656 Q138.9375,575.7656 138.25,576.8281 Q137.5625,577.8906 137.5625,579.9531 Q137.5625,582.0313 138.25,583.0938 Q138.9375,584.1406 140.2813,584.1406 Q140.9063,584.1406 141.5,583.875 Q142.0938,583.6094 142.7188,583.0313 L142.7188,585.8281 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="53" x="160.75" y="584.1074">TrieNode</text><line style="stroke:#A80036;stroke-width:1.5;" x1="56.5" x2="285.5" y1="595.9531" y2="595.9531"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="63.5" y="603.9531"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="205" x="75.5" y="610.1636">children:Map&lt;Character, TrieNode&gt;</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="63.5" y="616.7578"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="85" x="75.5" y="622.9683">bucket:Set&lt;V&gt;</text><line style="stroke:#A80036;stroke-width:1.5;" x1="56.5" x2="285.5" y1="629.5625" y2="629.5625"/><!--MD5=[a99bb1714d921ba862f49513019f06e1]
reverse link Index to InMemoryMapIndex--><path codeLine="27" d="M548.65,196.7531 C561.25,220.4231 575.57,247.3131 586.2,267.2731 " fill="none" id="Index-backto-InMemoryMapIndex" style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="542.45,200.0031,539.23,179.0631,554.8,193.4231,542.45,200.0031" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[0c874146360031182338019c634bc291]
reverse link Index to PersistentIndex--><path codeLine="28" d="M480.97,195.2231 C464.85,216.8031 446.58,241.2731 431.99,260.8031 " fill="none" id="Index-backto-PersistentIndex" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="475.46,190.8931,493.04,179.0631,486.68,199.2731,475.46,190.8931" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[6a85c328b2231678e545c17e42a32b80]
reverse link PersistentIndex to MapIndex--><path codeLine="29" d="M466.91,347.5331 C499.31,372.9531 538.3,403.5531 567.99,426.8531 " fill="none" id="PersistentIndex-backto-MapIndex" style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="462.54,353.0031,451.12,335.1431,471.18,341.9831,462.54,353.0031" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[455e98b8535b90a0b4fa3e8ae07c0d78]
reverse link InMemoryMapIndex to MapIndex--><path codeLine="30" d="M604.56,333.9831 C606.57,361.3531 609.34,399.2631 611.36,426.8931 " fill="none" id="InMemoryMapIndex-backto-MapIndex" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="604.17,328.6531,600.8233,337.9159,604.5273,333.6403,608.8028,337.3443,604.17,328.6531" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="73" x="610" y="378.02">«delegate»</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="36" x="628.5" y="393.1528">index</text><!--MD5=[22f5408fea1598e5aef4e72c6ecb62cb]
reverse link PersistentIndex to TrieIndex--><path codeLine="32" d="M414.6,355.1731 C418.66,378.9431 423.26,405.9231 426.85,426.9431 " fill="none" id="PersistentIndex-backto-TrieIndex" style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="407.68,356.2431,411.21,335.3531,421.48,353.8831,407.68,356.2431" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[c7872c23a4a2e264fded1b3ed7bce229]
reverse link Trie to HashTrie--><path codeLine="57" d="M176.96,355.6731 C176.49,381.7631 175.94,411.6431 175.54,433.2331 " fill="none" id="Trie-backto-HashTrie" style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="169.97,355.2231,177.33,335.3531,183.97,355.4731,169.97,355.2231" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[1cfb73b677e830f061434b0b20e228bc]
reverse link HashTrie to TrieNode--><path codeLine="58" d="M173.67,509.8331 C173.15,527.3231 172.57,547.1031 172.08,563.6631 " fill="none" id="HashTrie-backto-TrieNode" style="stroke:#A80036;stroke-width:1.0;"/><ellipse cx="173.8763" cy="502.5794" fill="#FFFFFF" rx="8" ry="8" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="173.6326" x2="174.12" y1="510.5757" y2="494.5831"/><line style="stroke:#A80036;stroke-width:1.0;" x1="165.88" x2="181.8726" y1="502.3357" y2="502.8231"/><!--MD5=[7cd19ff1c4b718dc77503a686bdf4b43]
reverse link Trie to TrieIndex--><path codeLine="59" d="M238.55,337.8931 C280.49,364.8631 335.92,400.5131 376.87,426.8531 " fill="none" id="Trie-backto-TrieIndex" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="234.28,335.1431,239.6876,343.3747,238.4859,337.8469,244.0136,336.6452,234.28,335.1431" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="44" x="329" y="378.02">«bind»</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="36" x="333" y="393.1528">V:File</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="36" x="327.6656" y="416.0223">index</text><!--MD5=[510680290def4f4cd4e9e7e722c0ee8d]
@startuml

title Index (LSP refactor)

package edu.tec.ic6821.fulltextsearch {

    package index {

        interface Index {
            + index(String term, File):void
            + search(String term):Set<File>
        }

        interface PersistentIndex {
            + persist():void
            + restore():boolean
        }

        class InMemoryMapIndex {
            - index:Map<String, Set<File>>
        }

        class MapIndex {
            - indexFile:File
            + MapIndex(:File)
        }

        Index <|.. InMemoryMapIndex
        Index <|- - PersistentIndex
        PersistentIndex <|.. MapIndex
        InMemoryMapIndex <- - MapIndex :<<delegate>>\nindex

        PersistentIndex <|.. TrieIndex

        class TrieIndex {
            - indexFile:File
            + TrieIndex(:File, :Trie<File>)
        }
    }

    package trie {


        interface Trie<V> {
            + insert(String key, V value):void
            + find(String key):Set<V>
        }

        class HashTrie<V> {
            - root:TrieNode
        }

        class TrieNode {
            - children:Map<Character, TrieNode>
            - bucket:Set<V>
        }

        Trie<|..HashTrie
        HashTrie+- -TrieNode
        TrieIndex "index" -up-> Trie :<<bind>>\nV:File
    }
}

@enduml

PlantUML version 1.2021.7(Sun May 23 06:40:07 CST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>